<!doctype html><html dir=ltr lang=zh-cn data-theme class="html theme--light"><head><title>覃宇
|
软件架构预述（译）</title><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="覃宇"><meta name=description content="软件架构编年史（2）软件架构预述"><link rel=stylesheet href=/scss/main.min.99393b720daa0e4e122d508358dfaa568774f7a5871f48ec1a496f33e554dae6.css integrity="sha256-mTk7cg2qDk4SLVCDWN+qVod096WHH0jsGklvM+VU2uY=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://qinyu.github.io/post/architecture-chronicles/premises/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="软件架构预述（译）"><meta name=twitter:description content="软件架构编年史（2）软件架构预述"><meta property="og:title" content="软件架构预述（译）"><meta property="og:description" content="软件架构编年史（2）软件架构预述"><meta property="og:type" content="article"><meta property="og:url" content="https://qinyu.github.io/post/architecture-chronicles/premises/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-09-12T00:00:00+00:00"><meta property="article:modified_time" content="2018-09-12T00:00:00+00:00"><meta property="og:site_name" content="覃宇"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"软件架构预述（译）","headline":"软件架构预述（译）","alternativeHeadline":"","description":"
      软件架构编年史（2）软件架构预述


    ","inLanguage":"zh-cn","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/qinyu.github.io\/post\/architecture-chronicles\/premises\/"},"author":{"@type":"Person","name":"覃宇"},"creator":{"@type":"Person","name":"覃宇"},"accountablePerson":{"@type":"Person","name":"覃宇"},"copyrightHolder":{"@type":"Person","name":"覃宇"},"copyrightYear":"2018","dateCreated":"2018-09-12T00:00:00.00Z","datePublished":"2018-09-12T00:00:00.00Z","dateModified":"2018-09-12T00:00:00.00Z","publisher":{"@type":"Organization","name":"覃宇","url":"https://qinyu.github.io","logo":{"@type":"ImageObject","url":"https:\/\/qinyu.github.iofavicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/qinyu.github.io\/post\/architecture-chronicles\/premises\/","wordCount":"203","genre":[],"keywords":["架构","编年史","翻译"]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/profile.jpg alt="profile picture"><div class=sidebar__introduction-title><a href=/>覃宇</a></div><div class=sidebar__introduction-description><p>Thoughtworker<br>移动应用架构师<br>技术教练<br></p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/qinyu/ target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:qinyusuain@gmail.com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
覃宇
2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>主页</a></li><li class=nav__list-item><a href=/post/ title>文章</a></li><li class=nav__list-item><div class=optionswitch><input class=optionswitch__picker type=checkbox id=2 hidden>
<label class=optionswitch__label for=2>作品 <i class="fa fa-angle-down" aria-hidden=true></i></label><div class=optionswitch__triangle></div><ul class=optionswitch__list><li class=optionswitch__list-item><a href=/books/ title>翻译写作</a></li><li class=optionswitch__list-item><a href=/courses/ title>线上课程</a></li></ul></div></li><li class=nav__list-item><a href=/about/ title>关于</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>软件架构预述（译）</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>Wed, Sep 12, 2018</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>阅读时间 1 分钟</span></li></ul><p><em>这篇文章是<a href=https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/>软件架构编年史</a>(<a href=https://www.jianshu.com/p/b477b2cc6cfa>译</a>)的一部分，这部编年史由<a href=https://herbertograca.com/category/development/series/software-architecture/>一系列关于软件架构的文章</a>组成。在这一系列文章中，我将写下我对软件架构的学习和思考，以及我是如何运用这些知识的。如果你阅读了这个系列中之前的文章，本篇文章的的内容将更有意义。</em></p><p>在这篇文章中，我将总结一些关于软件架构的最基本的概念，了解它们才能更好地理解后续的文章。</p><h1 id=没有银弹>没有银弹</h1><p>无论你如何理解我在<a href=https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/>软件架构编年史</a>(<a href=https://www.jianshu.com/p/b477b2cc6cfa>译</a>)中谈到的内容，首先要理解的是<strong>没有银弹</strong>，没有“<em>普适性</em>”的解决方案。尽可能地了解不同的方法，理解每一种方法的优劣，和它们解决的特定技术问题。</p><p>然后，当接受新的挑战时，先从理解业务和最终用户的需求开始。在搞清楚这些需求之后，你才能思考应该采用哪些架构风格和模式来更好地解决这些问题。</p><p>最后，自己做出选择，是实现一种已知的解决方案，还是创造适合自己的特定问题的独特设计。</p><blockquote><p>有些架构风格号称是所有形式的软件的“银弹”。然而，优秀的设计这应该选择最符合解决特定问题需要的风格。——Roy Fielding, 2000<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></blockquote><h1 id=术语>术语</h1><p>在软件开发的世界中使用的术语很多都模棱两可，因此，我必须澄清一些我使用的术语的含义，然后继续。</p><h2 id=功能性functional>功能性(Functional)</h2><p>在应用中纯粹发挥技术作用的代码片段、方法、类、类的组合。它们<strong>和（业务）领域无关</strong>，<strong>仅仅代表应用中的一种技术能力</strong>。例如：</p><ul><li>层次(Layer)</li><li>工厂(Factory)</li><li>资源库(Repository)</li><li>值对象(Value Object)</li><li>视图(View)</li><li>视图模型(ViewModel)</li></ul><h2 id=概念性conceptual>概念性(Conceptual)</h2><p>在应用中标识一个（业务）领域概念的代码片段、方法、类、类的组合。它们<strong>和领域相关</strong>，<strong>代表应用中的一种业务能力</strong>。例如：</p><ul><li>用户</li><li>产品</li><li>库存管理</li><li>产品变体</li><li>结帐</li><li>销售</li></ul><p>这种划分并不是说一个代码单元不能同时具备两种能力(功能性和概念性)。例如，“Money”对象可以表示一个领域概念，同时也被设计成一个值对象。如果我把它当成领域概念，我指的就是领域内的金钱概念，但如果我涉及的是这个类中的功能性方面时，我指的就是值对象的技术特性(没有ID、可以是不变的等等)。</p><h2 id=包package>包(Package)</h2><p>划分在一起的类组成的集合，理想情况下遵循一组规则进行划分。</p><h2 id=模块module>模块(Module)</h2><p>我使用<a href=https://www.amazon.com/Software-Architecture-Practice-SEI-Engineering-ebook/dp/B009GMUL84>Software Architecture in Practice</a><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>给出的定义，模块就是一个<strong>功能性包</strong>，它体现了应用中的<strong>一种技术能力</strong>。它是解耦的并且能够被其他的实现替换。我的理解是，模块即存在与较低的粒度级别，比如，“<strong>安全模块</strong>”或者“<strong>ORM</strong>”，也可以存在于像<strong>客户端</strong>和<strong>服务器</strong>这样的应用块。模块提供的是功能性内聚。</p><h2 id=组件component>组件(Component)</h2><p>我使用<a href=https://www.amazon.com/Software-Architecture-Practice-SEI-Engineering-ebook/dp/B009GMUL84>Software Architecture in Practice</a><sup id=fnref1:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>给出的定义，作者将组件定义为一个代表<strong>业务能力</strong>的<strong>概念性包</strong>。理想情况下，它也是和其他组件和模块解耦的。例如“<strong>用户</strong>”、“<strong>产品</strong>”或“<strong>结帐</strong>”。</p><p>然而，最重要的是要记住，理想情况下，它代表了一个<strong>限界上下文(Bounded Context)</strong>。组件提供了概念性内聚。</p><h2 id=应用application>应用(Application)</h2><p>我将面向用户的代码即 UI 视为应用，它建立在组件之上。例如，我们可以基于一组组件构建网络商店。不管怎样，这个网络商店会提供一个(店面) UI 让用户浏览和购买商品和另一个(管理) UI 让商店管理员管理商品、库存、支付供应商，等等。这是在同样的业务组件之上构建的两个独立的应用。</p><h2 id=系统system>系统(System)</h2><p>我认为系统是一组以某种方式在一起工作，为各种企业必需品提供功能，形成一个企业范围内的系统，即企业应用。这些应用可能构建在相同或不同的组件上。在之前网络商店的例子中，系统就是作为一个整体的网络商店，包括两个基于同样业务组件构建的两个应用(店面和管理)，还有其他像支付供应商或货运供应商这样的第三方应用。</p><h2 id=架构architecture>架构(Architecture)</h2><p>软件架构的简单定义有很多，我觉得都不错，但我认为理解它是什么很简单，而更重要的是，定义架构的产出，它应该给项目带来什么。　</p><blockquote><p>软件架构[…]是系统需要考虑的一组结构，它们包括软件元素和它们之间的关系，以及这些元素和关系的属性。—— Clements et al, 2010<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p></blockquote><p>下面是我考虑架构的方面：</p><ul><li><strong>横跨所有特性开发</strong>的技术决策，例如，框架、代码标准、文档、流程，&mldr;；</li><li>这是存在于项目中的一组<strong>很难在后期改变</strong>的技术决策 <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>；</li><li>它是系统的全景图<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>:pp.2，粗略的描绘，<strong>结构</strong>，组件及其关系<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup> <sup id=fnref1:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>;</li><li>它使<strong>项目做好变化的准备</strong><sup id=fnref1:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>:pp.30，常常是将决策推迟到最后允许的时刻<sup id=fnref2:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>:pp.32；</li><li>它让项目做好<strong>重用组件和模块的准备</strong><sup id=fnref2:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>；</li><li>它制定出<strong>结果的一致性标准</strong>并建立<strong>轻量的流程</strong>，比如编码规范、开发阶段、持续交付和持续部署；</li><li>它<strong>不是某一个人的职责</strong>，而是由来自项目中不同特性团队的开发者组成的<em>行会</em>的职责。</li></ul><p>如果你不熟悉行会的概念，可以观看下面关于<em>Spotify 工程师文化</em>的视频：</p><ul><li><a href="https://www.youtube.com/watch?v=4GK1NDTWbkY">Spotify Engineering Culture part 1</a></li><li><a href="https://www.youtube.com/watch?v=X3rGdmoTjDc">Spotify Engineering Culture part 2</a></li></ul><h2 id=架构师architect>架构师(Architect)</h2><p>他是由行会讨论和决定的架构的<strong>发起人和守护者</strong>。他是部门/团队中经验最丰富的开发者之一，恰好承担着分析高层次问题和解决方案的额外职责。在做出架构决策时，他还拥有“质量票”（He also benefits from a “quality vote” when making an architectural decision.）。</p><p>可是，有一点值得注意，所有开发者某种程度上都是架构师，因为他们都要了解架构，他们都会议某种形式参与架构，他们都适当地承担着维护架构的职责。　</p><h2 id=象牙塔架构师ivory-tower-architect>象牙塔架构师(Ivory Tower Architect)</h2><p>有一种架构师会做出和架构有关的所有决定，这种万能的<strong>象牙塔架构师</strong>是一种架构师的<strong>反模式</strong>。他对其他干系人对架构的贡献既不开放，也不轻易接收，而是阉割了这些贡献。</p><h2 id=架构以及代码的坏味道smells-of-a-bad-architecture-and-bad-code8>架构以及代码的坏味道（Smells of a bad Architecture (and bad code)） <sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup></h2><h2 id=僵化rigidity>僵化(Rigidity)</h2><p>如果软件难以修改是因为修改会导致更多关联修改，软件就是僵化的。它就会变成兔子洞：当我们以为修改快要完成时，突然发现还有更多的代码需要修改，把我们拉进无止尽的轮回之中。</p><h2 id=脆弱fragility>脆弱(Fragility)</h2><p>脆弱的软件在修改时，总会出现意料之外的、毫无关联的、无法预测的错误。</p><h2 id=牢固immobility>牢固(Immobility)</h2><p>如果设计包含一些可以在其它系统中使用的部分，但将这些部分从原系统中分离出来需要大量工作甚至带来许多风险，我们就说设计是牢固的。</p><h2 id=粘滞viscosity>粘滞(Viscosity)</h2><p>在一个粘滞的系统中，要做对困难重重，要做错却轻而易举。这意味着通过正常开发实现变更不如用非常手段来得容易。</p><p>如果执行单元测试和/或编译需要耗费很长时间，开发很可能导跳过这些过程，不跑任何自动化测试就实现非常规的修改，这就是<strong>系统范围的粘滞</strong>。　</p><h2 id=不必要的重复needless-repetition>不必要的重复(Needless repetition)</h2><p>当时间不够或经验不足导致必要的抽象缺失时，就会产生不必要的重复。这些代码也许并不是直接复制粘贴造成的重复，而是由在不同地方重复定义的相同业务规则带来的。</p><h2 id=晦涩opacity>晦涩(Opacity)</h2><p>代码写得混乱，难以理解，我们需要深人方法实现的细节才能搞清楚代码要干什么。</p><h2 id=不必要的复杂needless-complexity>不必要的复杂(Needless complexity)</h2><p>开发者采用了多种不同的抽象和未来潜在变化的应对措施，来积极地避免其他六种坏味道。良好的软件设计是轻量灵活的，理解起来更容易，最重要的是修改更容易，因此不必预判所有未来的潜在变化。</p><p><a href=https://herbertograca.com/2017/07/05/software-architecture-premises/>原文</a>作者为<strong>Herberto Graça</strong>，本译文作者为<strong>覃宇</strong>，分享需遵循<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a>许可。</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>2000 – Roy Fielding – <a href=http://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdfhttp://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf>Architectural Styles and the Design of Network-based Software Architectures</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>2012 – Len Bass, Paul Clements, Rick Kazman – <a href=https://www.amazon.com/Software-Architecture-Practice-SEI-Engineering-ebook/dp/B009GMUL84>Software Architecture in Practice</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref2:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>2010 – Paul Clements, Felix Bachmann, Len Bass – <a href=https://www.amazon.co.uk/dp/0321552687>Documenting Software Architectures</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>2006 – Booch, in <a href=https://herbertograca.com/2017/07/05/software-architecture-premises/#05>[5 pg.2]</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>2010 – James Coplien, Gertrud Bjornvig – <a href=https://www.amazon.co.uk/Lean-Architecture-Agile-Software-Development/dp/0470684208>Lean Architecture</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref2:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>2007 – <a href=https://en.wikipedia.org/wiki/IEEE_1471>IEEE1471</a> in <a href=https://herbertograca.com/2017/07/05/software-architecture-premises/#05>[5 pg.2]</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p>2014 – M. H. Jongerius – <a href=http://mhjongerius.tumblr.com/post/61853273412/the-seven-design-smells-of-rotting-software>THE SEVEN DESIGN SMELLS OF ROTTING SOFTWARE</a>&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><h3>这个系列的帖子</h3><ul><li><a href=/post/architecture-chronicles/premises/>软件架构预述（译）</a></li><li><a href=/post/architecture-chronicles/chronicles/>软件架构编年史（译）</a></li></ul></div><div class=post__footer><span><a class=tag href=/tags/%E6%9E%B6%E6%9E%84/>架构</a><a class=tag href=/tags/%E7%BC%96%E5%B9%B4%E5%8F%B2/>编年史</a><a class=tag href=/tags/%E7%BF%BB%E8%AF%91/>翻译</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
覃宇
2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></body></html>